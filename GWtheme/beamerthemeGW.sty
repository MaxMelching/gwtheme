%% start of file `beamerthemeGW.sty'.
% Author: Max Melching (m-melching@web.de), 2025
%
% Acknowledgements: this theme is a based on the UC Berkeley beamer theme.
% The file structure, however, follows the DTU template from
% https://gitlab.gbar.dtu.dk/latex/dtutemplates/-/tree/master/templates/Beamer


\mode<presentation>

\usefonttheme{GW}
\useoutertheme{GW}
\useinnertheme{GW}
% \usecolortheme{MPI}
% \usecolortheme{MPIMixed}
% \usecolortheme{MPIGrav}
\usecolortheme{MPIGravMixed}
% \usecolortheme{Caltech}



% -- Define keys for easy updating
\RequirePackage{pgf}
\RequirePackage{calc}

\pgfkeys{
	/gwtheme/.is family, /gwtheme,
    % -- No need to define default style, every variable has one already
    % 
    % -- outertheme keys ------------------------------------------------------
    % headerskip/.estore in = \themeGW@headerskip,
    % headerskip/.code = {\setlength{\themeGW@headerskip}{#1}\setlength{\themeGW@gwbarshift}{#1-24pt}},
    % headerskip/.code = {\setlength{\themeGW@headerskip}{#1}\setlength{\gwbar@signalupshift}{-#1-24pt}},
    headerskip/.code = {\setlength{\themeGW@headerskip}{#1}\setlength{\themeGW@gwbarshift}{#1-24pt}\setlength{\gwbar@signalupshift}{-#1-24pt}},
    % secsubsecseparator/.estore in = \themeGW@SecSubsecSeparator,
    secsubsecseparator/.code = {\renewcommand{\themeGW@SecSubsecSeparator}{#1}},
    % gwbarshift/.estore in = \themeGW@gwbarshift,
    % gwbarshift/.code = {\setlength{\themeGW@gwbarshift}{#1}},
    gwbarshift/.code = {\setlength{\themeGW@gwbarshift}{#1}\setlength{\gwbar@signalupshift}{-#1-24pt}},
    footupshift/.estore in = \themeGW@footupshift,
    footrightshift/.estore in = \themeGW@footrightshift,
    upperleftbg/.estore in = \themeGW@upperleftbg,
    upperrightbg/.estore in = \themeGW@upperrightbg,
    maxpatternheight/.estore in = \themeGW@MaxPatternHeight,
    patternsquaresize/.estore in = \themeGW@squaresize,
    patterncommonshift/.estore in = \themeGW@PatternCommonShift,
    patternrelativeshift/.estore in = \themeGW@PatternRelativeShift,
    squarepathheight/.code = {%
        \renewcommand{\themeGW@SquarePathHeight}{#1}%
        \themeGW@CalcPatternLengths%
    },
    patternnsquarepertriangle/.code = {\themeGW@SetNSquarePerTriangle{#1}},
    patternnsquarecommonshift/.code = {%
        \renewcommand{\themeGW@NSquareCommonShift}{#1}%
        % \setlength{\themeGW@PatternCommonShift}{-\themeGW@SquarePathHeight*\themeGW@NSquareCommonShift*2*\themeGW@PatternStepSize}  % So that we have shift by one square
        \themeGW@CalcPatternLengths%
    },
    patternnsquarerelativeshift/.code = {%
        \renewcommand{\themeGW@NSquareRelativeShift}{#1}%
        % \setlength{\themeGW@PatternRelativeShift}{-\themeGW@SquarePathHeight*\themeGW@NSquareRelativeShift*2*\themeGW@PatternStepSize}  % So that we have shift by one square
        \themeGW@CalcPatternLengths%
    },
    patterninsetsize/.estore in = \themeGW@PatternInsetSize,
    patterndownshift/.estore in = \themeGW@PatternDownShift,
    patternnsquaredownshift/.code = {%
        \addtolength{\themeGW@SquarePathHeight}{-\themeGW@PatternDownShift}%  Reset
        % TODO: what if custom squarepathheight was set?
        \renewcommand{\themeGW@NSquareDownShift}{#1}%
        \themeGW@CalcPatternLengths%
    },
    levelledbgline/.code = {\LevelledBGLine{#1}},
    logoinfoot/.code = {\settoggle{themeGW@logoinfoot}{#1}},
    % -- innertheme keys ------------------------------------------------------
    itemsquaresize/.estore in = \themeGW@ItemSquareSize,
    iteminsetwidthwidth/.estore in = \themeGW@ItemInsetWidth,
}

\newcommand{\UpdateGWthemeOptions}[1][]{%
    \pgfkeys{/gwtheme, #1}%
}


% -- Change spacing in document
\fontdimen2\font=3pt % Increase space between words, found original one too small -> see https://tex.stackexchange.com/questions/23921/how-to-shorten-shrink-spaces-between-words. Has to be IN document for some reason
\linespread{1.1} % Increase space between lines (found original one too small)


\mode
<all>
